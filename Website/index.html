<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ listingInfo.Name }}</title>
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <div class="background-gradient"></div>

  <main class="container">
    <!-- Header Section -->
    <header class="header">
      <!-- Banner removed by user request -->

      <h1 class="title">{{ listingInfo.Name }}</h1>

      {{~ if listingInfo.Description; ~}}
      <p class="description">{{ listingInfo.Description }}</p>
      {{~ end; ~}}

      <div class="author-info">
        <span class="published-by">
          Published by
          <a href="{{ listingInfo.Author.Url }}" target="_blank" class="author-link">
            {{ listingInfo.Author.Name }}
          </a>
          {{~ if listingInfo.Author.Email; ~}}
          <span class="author-email" title="{{ listingInfo.Author.Email }}">
            ({{ listingInfo.Author.Email }})
          </span>
          {{~ end; ~}}
        </span>

        {{~ if listingInfo.InfoLink.Url; ~}}
        <a href="{{ listingInfo.InfoLink.Url }}" target="_blank" class="info-link">
          {{ if listingInfo.InfoLink.Text; listingInfo.InfoLink.Text; else; "Learn More"; end; }}
          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
            <path
              d="M8.636 3.5a.5.5 0 0 0-.5-.5H1.5A1.5 1.5 0 0 0 0 4.5v10A1.5 1.5 0 0 0 1.5 16h10a1.5 1.5 0 0 0 1.5-1.5V7.864a.5.5 0 0 0-1 0V14.5a.5.5 0 0 1-.5.5h-10a.5.5 0 0 1-.5-.5v-10a.5.5 0 0 1 .5-.5h6.636a.5.5 0 0 0 .5-.5z" />
            <path
              d="M16 .5a.5.5 0 0 0-.5-.5h-5a.5.5 0 0 0 0 1h3.793L6.146 9.146a.5.5 0 1 0 .708.708L15 1.707V5.5a.5.5 0 0 0 1 0v-5z" />
          </svg>
        </a>
        {{~ end; ~}}
      </div>
    </header>

    <!-- Add to VCC Section -->
    <section class="add-to-vcc-section">
      <div class="url-input-group">
        <input type="text" id="vccUrlField" readonly value="{{ listingInfo.Url }}" class="url-input">
        <button id="vccAddRepoButton" class="btn btn-primary">Add to VCC</button>
        <button id="vccUrlFieldCopy" class="btn btn-secondary" title="Copy URL">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
            <path
              d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z" />
            <path
              d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z" />
          </svg>
        </button>
        <button id="urlBarHelp" class="btn btn-icon" title="How to add to VCC">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
            <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z" />
            <path
              d="M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286zm1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94z" />
          </svg>
        </button>
      </div>
    </section>

    <!-- Search Section -->
    <section class="search-section">
      <div class="search-box">
        <svg class="search-icon" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
          <path
            d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z" />
        </svg>
        <input type="text" id="searchInput" placeholder="Search packages..." class="search-input">
      </div>
    </section>

    <!-- Packages Section -->
    <section class="packages-section">
      <div class="packages-grid" id="packageGrid">
        {{~ for package in packages ~}}
        <div class="package-card" data-package-name="{{ package.DisplayName }}" data-package-id="{{ package.Name }}">
          <div class="package-header">
            <div class="package-info">
              <h3 class="package-name">{{ package.DisplayName }}</h3>
              <p class="package-id">{{ package.Name }}</p>
            </div>
            <span class="package-type-badge">{{ package.Type }}</span>
          </div>

          {{~ if package.Description; ~}}
          <p class="package-description">{{ package.Description }}</p>
          {{~ end; ~}}

          <div class="package-footer">
            <button class="btn btn-primary btn-sm rowAddToVccButton" data-package-id="{{ package.Name }}">
              Add to VCC
            </button>
            <button class="btn btn-secondary btn-sm rowPackageInfoButton" data-package-id="{{ package.Name }}"
              title="Package Info">
              <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor">
                <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z" />
                <path
                  d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z" />
              </svg>
            </button>
            <button class="btn btn-icon btn-sm rowMenuButton" data-package-url="{{ package.ZipUrl }}"
              title="More options">
              <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor">
                <path
                  d="M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z" />
              </svg>
            </button>
          </div>
        </div>
        {{~ end ~}}
      </div>
    </section>
  </main>

  <!-- Help Modal -->
  <div id="addListingToVccHelp" class="modal" hidden>
    <div class="modal-backdrop"></div>
    <div class="modal-content">
      <div class="modal-header">
        <h2>How to add this listing to VCC / ALCOM</h2>
        <button id="addListingToVccHelpClose" class="btn btn-icon">
          <svg width="20" height="20" viewBox="0 0 16 16" fill="currentColor">
            <path
              d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z" />
          </svg>
        </button>
      </div>

      <div class="modal-body">
        <div class="tabs">
          <button class="tab-button active" data-tab="alcom">ALCOM</button>
          <button class="tab-button" data-tab="vcc">VCC</button>
        </div>

        <div id="tab-alcom" class="tab-content active">
          <p>To add this listing to ALCOM, follow these steps:</p>
          <ol>
            <li>Open ALCOM and go to Resources</li>
            <li>Click the "Repositories" tab</li>
            <li>Click the "Add Repository" button</li>
            <li>In the field, paste the URL displayed below</li>
            <li>Click "Add Repository"</li>
            <li>Go to any of your projects to see the packages from the newly added listing</li>
          </ol>
        </div>

        <div id="tab-vcc" class="tab-content">
          <p>To add this listing to your VCC (VRChat Creator Companion), follow these steps:</p>
          <ol>
            <li>Open your VCC and go to Settings</li>
            <li>Click the "Packages" tab</li>
            <li>Click "Add Repository"</li>
            <li>In the field that appears, paste the URL displayed below</li>
            <li>Click "Add"</li>
            <li>Check the repository info and click "I Understand"</li>
            <li>Go to any of your projects to see the packages from the newly added listing</li>
          </ol>
        </div>

        <div class="url-section">
          <label>Listing URL</label>
          <div class="url-input-group">
            <input type="text" id="vccListingInfoUrlField" readonly value="{{ listingInfo.Url }}" class="url-input">
            <button id="vccListingInfoUrlFieldCopy" class="btn btn-secondary">
              <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                <path
                  d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z" />
                <path
                  d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z" />
              </svg>
              Copy
            </button>
          </div>
        </div>

        <p class="help-footer">
          You can read more about Package Listings in the
          <a href="https://vcc.docs.vrchat.com" target="_blank">VCC documentation</a>.
        </p>
      </div>
    </div>
  </div>

  <!-- Package Info Modal -->
  <div id="packageInfoModal" class="modal" hidden>
    <div class="modal-backdrop"></div>
    <div class="modal-content">
      <div class="modal-header">
        <div>
          <h2 id="packageInfoName">Package Name</h2>
          <div class="package-meta">
            <span id="packageInfoId" class="package-id">com.package.id</span>
            <span id="packageInfoVersion" class="version-badge">v1.0.0</span>
          </div>
        </div>
        <button id="packageInfoModalClose" class="btn btn-icon">
          <svg width="20" height="20" viewBox="0 0 16 16" fill="currentColor">
            <path
              d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z" />
          </svg>
        </button>
      </div>

      <div class="modal-body">
        <section class="info-section">
          <h3>Description</h3>
          <p id="packageInfoDescription">Package description</p>
        </section>

        <section class="info-section">
          <h3>Author</h3>
          <p>
            <a href="#" target="_blank" id="packageInfoAuthor">Author Name</a>
          </p>
        </section>

        <section class="info-section">
          <h3>Dependencies</h3>
          <ul id="packageInfoDependencies"></ul>
        </section>

        <section class="info-section" id="packageInfoKeywordsSection">
          <h3>Keywords</h3>
          <div id="packageInfoKeywords" class="keywords-container"></div>
        </section>

        <section class="info-section" id="packageInfoLicenseSection">
          <h3>License</h3>
          <p>
            <a href="#" id="packageInfoLicense">License</a>
          </p>
        </section>

        <section class="info-section">
          <h3>Listing URL</h3>
          <div class="url-input-group">
            <input type="text" id="packageInfoVccUrlField" readonly value="{{ listingInfo.Url }}" class="url-input">
            <button id="packageInfoVccUrlFieldCopy" class="btn btn-secondary">
              <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                <path
                  d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z" />
                <path
                  d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z" />
              </svg>
              Copy
            </button>
            <button id="packageInfoListingHelp" class="btn btn-icon" title="How to add to VCC">
              <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z" />
                <path
                  d="M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286zm1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94z" />
              </svg>
            </button>
          </div>
        </section>

        <p class="help-footer">
          You can read more about Package Listings in the
          <a href="https://vcc.docs.vrchat.com" target="_blank">VCC documentation</a>.
        </p>
      </div>
    </div>
  </div>

  <!-- Context Menu -->
  <div id="rowMoreMenu" class="context-menu" hidden>
    <button id="rowMoreMenuDownload" class="context-menu-item">
      <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
        <path
          d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z" />
        <path
          d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z" />
      </svg>
      Download .ZIP
    </button>
  </div>

  <script type="module" src="app.js"></script>
</body>

</html>